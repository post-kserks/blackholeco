"""
–°–ª—É—á–∞–π–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏ –∏ —Å–æ–±—ã—Ç–∏—è –≤ –∫–æ—Å–º–æ—Å–µ (–ø–æ–ª–∏—Ü–∏—è, –ø–∏—Ä–∞—Ç—ã –∏ —Ç.–¥.)
"""

import random
from utils.io import print_slow


def check_police_encounter(state):
    """
    –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤—Å—Ç—Ä–µ—á—É —Å –ø–æ–ª–∏—Ü–∏–µ–π.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç True, –µ—Å–ª–∏ –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø–æ–ª—ë—Ç.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç False, –µ—Å–ª–∏ –ø–æ–ª—ë—Ç –ø—Ä–µ—Ä–≤–∞–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç—é—Ä—å–º–∞ –∏–ª–∏ —Å–º–µ—Ä—Ç—å).
    """
    # 20% —à–∞–Ω—Å –≤—Å—Ç—Ä–µ—á–∏
    if random.random() > 0.2:
        return True

    from dialog.loader import load_dialog
    from dialog.engine import run_dialog

    print_slow("\n" + "=" * 40)
    print_slow("üöî –í–ù–ò–ú–ê–ù–ò–ï! –í–∞—Å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ü–æ–ª–∏—Ü–∏—è.")
    
    dialog = load_dialog("police_encounter")
    if dialog:
        run_dialog(dialog, state)
    
    print_slow("=" * 40)
    
    # –ü–æ—Å–ª–µ –¥–∏–∞–ª–æ–≥–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –∂–∏–≤ –ª–∏ –∏–≥—Ä–æ–∫ –∏ –Ω–µ –≤ —Ç—é—Ä—å–º–µ –ª–∏ –æ–Ω
    # –ï—Å–ª–∏ state.alive == False, –∑–Ω–∞—á–∏—Ç –æ–Ω –ª–∏–±–æ —É–º–µ—Ä, –ª–∏–±–æ –≤ —Ç—é—Ä—å–º–µ (state.die —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç alive=False)
    return state.alive

